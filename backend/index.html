<!DOCTYPE html>
<html>
<head>
    <title>Resume Upload Test</title>
    <style>
        body { font-family: sans-serif; padding: 50px; }
        form { background: #f4f4f4; padding: 20px; border-radius: 8px; max-width: 400px; }
        input { width: 100%; margin-bottom: 10px; padding: 8px; box-sizing: border-box; }
        button { background: #28a745; color: white; padding: 10px; border: none; cursor: pointer; width: 100%; }
        button:hover { background: #218838; }
        #status { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>Resume Upload Test</h2>
    <form id="uploadForm">
        <label>Candidate Name:</label>
        <input type="text" id="name" placeholder="John Doe" required>

        <label>Email:</label>
        <input type="email" id="email" placeholder="john@example.com" required>

        <label>Resume File:</label>
        <input type="file" id="file" required>

        <button type="submit">Upload to Google Drive</button>
    </form>
    <p id="status"></p>

    <script>
        document.getElementById("uploadForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const status = document.getElementById("status");
            status.innerText = "Uploading... please wait...";
            status.style.color = "blue";

            const formData = new FormData();
            formData.append("name", document.getElementById("name").value);
            formData.append("email", document.getElementById("email").value);
            formData.append("file", document.getElementById("file").files[0]);

            try {
                const response = await fetch("http://127.0.0.1:5000/upload-resume", {
                    method: "POST",
                    body: formData
                });

                const result = await response.json();
                if (response.ok) {
                    status.innerText = "✅ Success! File uploaded and Sheet updated.";
                    status.style.color = "green";
                    console.log("File Link:", result.link);
                } else {
                    status.innerText = "❌ Error: " + result.error;
                    status.style.color = "red";
                }
            } catch (error) {
                status.innerText = "❌ Network Error: Is the python server running?";
                status.style.color = "red";
            }
        });
    </script>
</body>
</html>